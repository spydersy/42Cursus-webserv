server {
    listen       80;                            // port
    server_name  domain1.com www.domain1.com;   // server_name
    root         html;
    client_max_body_size 200M;
    
    error_page 404 /custom_404.html;            // setup error_page

    location / {                                // redirection
        root            /var/www/nginx-default; // default file to answer if the request is a directory
        proxy_pass      http://big_server_com;
    }

    location ~ \.php$ {
        fastcgi_pass   127.0.0.1:1025;
    }

    location ~ \.(gif|jpg|png)$ {
        root    /data/images;
        autoindex on;       // directory listing on/off
    }
}

server {
    listen       80;
    server_name  domain2.com www.domain2.com;
    access_log   logs/domain2.access.log  main;

    location ~ ^/(images|javascript|js|css|flash|media|static)/  {
        root    /var/www/virtual/big.server.com/htdocs;
        expires 30d;
    }

    # pass requests for dynamic content to rails/turbogears/zope, et al
    location / {
        proxy_pass      http://127.0.0.1:8080;
    }
}


server {
    listen          80;
    server_name     big.server.com;
    access_log      logs/big.server.access.log main;

    location / {
        proxy_pass      http://big_server_com;
    }
}